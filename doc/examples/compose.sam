class ReadOnly {
    private Object myUnderlying;

    public ReadOnly(Object underlying) {
        myUnderlying = underlying;
    }

    public Object get() {
        Object value = myUnderlying.get();
        return value;
    }

    public Object readOnly() {
        return this;    // Already read-only
    }
}

class Logger {
    private Object myUnderlying;

    public Logger(Object underlying) {
        myUnderlying = underlying;
    }

    public Object *(Object arg*) {
        Object value = myUnderlying.*(arg);
        return value;
    }
}

class Directory {
    private Object myFile;

    public void put(Object file) {
        myFile = file;
    }

    public Object get() {
        return myFile;
    }

    public Object readOnly() {
        ReadOnly readOnly = new ReadOnly(this);
        return readOnly;
    }
}

class Owner {
    private Object delegate;

    public Owner() {
        delegate = new Unknown();
    }

    public void test() {
        Directory dir = new Directory();
        Object readOnly = dir.readOnly();
        Object loggedReadOnly = new Logger(readOnly);

        delegate.read(loggedReadOnly);
    }
}

config {
    Owner owner;

    setup {
        owner = new Owner();
    }

    test {
        owner.test();
    }
}

denyAccess("delegate", "readOnly").


expectFailure.
